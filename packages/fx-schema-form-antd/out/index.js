!function e(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("react"),require("json-pointer"),require("fx-schema-form-core"),require("recompose"),require("react-redux"),require("reselect"),require("lodash.isequal"),require("uuid"),require("redux-act"),require("lodash.clonedeep")):"function"==typeof define&&define.amd?define("fx-schema-form-antd",["react","json-pointer","fx-schema-form-core","recompose","react-redux","reselect","lodash.isequal","uuid","redux-act","lodash.clonedeep"],r):"object"==typeof exports?exports["fx-schema-form-antd"]=r(require("react"),require("json-pointer"),require("fx-schema-form-core"),require("recompose"),require("react-redux"),require("reselect"),require("lodash.isequal"),require("uuid"),require("redux-act"),require("lodash.clonedeep")):t["fx-schema-form-antd"]=r(t.react,t["json-pointer"],t["fx-schema-form-core"],t.recompose,t["react-redux"],t.reselect,t["lodash.isequal"],t.uuid,t["redux-act"],t["lodash.clonedeep"])}(this,function(e,t,r,n,a,o,i,s,c,u){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=10)}([function(e,t,r){"use strict";function n(e,t){function r(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]]);return r}function o(e,t,r,n){var a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n,i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}function i(e,t){return function(r,n){t(r,n,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,s)}c((n=n.apply(e,t||[])).next())})}function u(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(s=s.call(i,r[1])).done)return s;switch(i=0,s&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){a.label=r[1];break}if(6===r[0]&&a.label<s[1]){a.label=s[1],s=r;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(r);break}s[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o,i,s,c;return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c}function p(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function m(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,o=[],i;try{for(;(void 0===t||t-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(e){i={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function f(e){return this instanceof f?(this.v=e,this):new f(e)}function l(e,t,r){function n(e){u[e]&&(p[e]=function(t){return new Promise(function(r,n){m.push([e,t,r,n])>1||a(e,t)})})}function a(e,t){try{o(u[e](t))}catch(e){c(m[0][3],e)}}function o(e){e.value instanceof f?Promise.resolve(e.value.v).then(i,s):c(m[0][2],e)}function i(e){a("next",e)}function s(e){a("throw",e)}function c(e,t){e(t),m.shift(),m.length&&a(m[0][0],m[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u=r.apply(e,t||[]),p,m=[];return p={},n("next"),n("throw"),n("return"),p[Symbol.asyncIterator]=function(){return this},p}function y(e){function t(t,a){e[t]&&(r[t]=function(r){return(n=!n)?{value:f(e[t](r)),done:"return"===t}:a?a(r):r})}var r,n;return r={},t("next"),t("throw",function(e){throw e}),t("return"),r[Symbol.iterator]=function(){return this},r}function g(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof m?m(e):e[Symbol.iterator]()}function v(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}t.d=n,r.d(t,"a",function(){return O}),t.c=o,t.b=c,t.e=u;var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},O=Object.assign||function e(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}},function(t,r){t.exports=e},function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11);r.d(t,"SchemaForm",function(){return n.a});var a=r(24);r.d(t,"SchemaFormItem",function(){return a.a});var o=r(9);r.d(t,"FormReducer",function(){return o.a});var i=r(28);r.d(t,"defaultTheme",function(){return i.a}),r.d(t,"nsFactory",function(){return i.b});var s=r(34);r.d(t,"createForms",function(){return s.a});var c=r(6);r.d(t,"hocFactory",function(){return c.a});var u=r(5),p=r.n(u);p.a.set=function e(t,r,n){for(var a=Array.isArray(r)?r:p.a.parse(r),o=a[0],i=0;i<a.length-1;++i){var s=a[i];"-"===s&&Array.isArray(t)&&(s=t.length),o=a[i+1],s in t||(o.match(/^(\d+|-)$/)?t[s]=[]:t[s]={}),t=t[s],!t&&o&&(t=Number.isNaN(1*o)?{}:[])}return"-"===o&&Array.isArray(t)&&(o=t.length),t[o]=n,this}},function(e,t){e.exports=r},function(e,r){e.exports=t},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(4),a=r.n(n),o=r(13),i=r(15),s=r(18),c=r(19),u=r(20),p=r(21),m=r(22),h=new n.BaseFactory,d={merge:o.a.bind(o.a,h),temp:i.a.bind(i.a,h),field:s.a.bind(s.a,h),theme:c.a.bind(c.a,h),validate:u.a.bind(u.a,h),array:p.a.bind(p.a,h),make:m.a.bind(m.a,h)};for(var f in d)if(d.hasOwnProperty(f)){var l=d[f];h.add(f,l),h.lock(f)}},function(e,t){e.exports=a},function(e,t,r){"use strict";r.d(t,"b",function(){return d}),r.d(t,"a",function(){return f});var n=r(5),a=r.n(n),o=r(14),i=r.n(o),s=function(e,t){return t.getCurrentState?t.getCurrentState(e,t):e[t.schemaKey]},c=function(e,t){var r=s(e,t).data;return void 0===r?{}:r},u=function(e,t){var r=t.schemaKey,a=t.mergeSchema,o=a.keys,i=void 0===o?[]:o,c=s(e,t).data,u=void 0===c?{}:c;return n.has(u,n.compile(i))?n.get(u,n.compile(i)):void 0},p=function(e,t){var r=t.schemaKey,n=s(e,t).meta;return{isLoading:n.data.isLoading,isValid:n.data.isValid}},m=function(e,t){var r=t.schemaKey,n=t.mergeSchema,a=n.keys,o=void 0===a?[]:a;return s(e,t).meta.getMeta(o,"array"!==n.type)},h=function(e,t){var r=t.schemaKey,n=s(e,t),a=n.data,o=void 0===a?{}:a,i=n.meta,c=void 0===i?{actions:{}}:i;return t.schemaFormOptions&&t.schemaFormOptions.ajv&&c.init(t.schemaFormOptions,t.schemaKey),c.actions},d=Object(o.createSelector)([m,u,c],function(e,t,r){return{meta:e,formData:r,formItemData:t}}),f=Object(o.createSelector)([h,p],function(e,t){return{actions:e,metaState:t}})},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r(26),a=r.n(n),o=r(5),i=r.n(o),s=r(27),c=r.n(s),u=function(){function e(e){this.initialState=e,this.updateItem=Object(n.createAction)("更新表单值"),this.toggleItem=Object(n.createAction)("显示/隐藏元素"),this.removeItem=Object(n.createAction)("删除元素"),this.addItem=Object(n.createAction)("添加元素"),this.switchItem=Object(n.createAction)("元素移位"),this.updateItemMeta=Object(n.createAction)("更新元素的meta信息"),this.updateMetaState=Object(n.createAction)("更改meta的状态"),this.updateData=Object(n.createAction)("更改data的值")}return Object.defineProperty(e.prototype,"actions",{get:function(){return{updateItem:this.updateItem,toggleItem:this.toggleItem,removeItem:this.removeItem,addItem:this.addItem,switchItem:this.switchItem,updateMetaState:this.updateMetaState,updateItemMeta:this.updateItemMeta,updateData:this.updateData}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reducer",{get:function(){return Object(n.createReducer)((e={},e[this.updateItem]=this.updateItemHandle.bind(this),e[this.toggleItem]=this.toggleItemHandle.bind(this),e[this.addItem]=this.addItemHandle.bind(this),e[this.removeItem]=this.removeItemHandle.bind(this),e[this.switchItem]=this.switchItemHandle.bind(this),e[this.updateMetaState]=this.updateMetaStateHandle.bind(this),e[this.updateItemMeta]=this.updateMetaHandle.bind(this),e[this.updateData]=this.updateDataHandle.bind(this),e),this.initialState);var e},enumerable:!0,configurable:!0}),e.prototype.updateDataHandle=function(e,t){return Object.assign({},e,{data:t})},e.prototype.getOrigin=function(e){return{originData:c()(e.data),originMeta:c()(e.meta)}},e.prototype.updateMetaStateHandle=function(e,t){var r=t.isLoading,n=t.isValid,a=t.meta,o=this.getOrigin(e).originMeta;return a&&(o=a),void 0!==r&&(o.data.isLoading=r),void 0!==n&&(o.data.isValid=n),Object.assign({},e,{meta:o})},e.prototype.updateItemHandle=function(e,t){var r=t.keys,n=t.data,a=t.meta,o=this.getOrigin(e),s=o.originData,c=o.originMeta,u=c.getKey(r).normalKey;return i()(s).set(u,n),c.setMeta(r,a),Object.assign({},e,{data:s,meta:c})},e.prototype.updateMetaHandle=function(e,t){var r=t.keys,n=t.meta,a=this.getOrigin(e),o=a.originData,i=a.originMeta,s=i.getKey(r).normalKey,c=i.getMeta(r,!1)||{};return i.setMeta(r,n),Object.assign({},e,{meta:i})},e.prototype.toggleItemHandle=function(e,t){var r=t.keys,n=this.getOrigin(e).originMeta,a=n.getKey(r).normalKey,o=n.getMeta(r,!1)||{};return n.setMeta(r,Object.assign({},o,{isShow:void 0!==o.isShow&&!o.isShow}),!1),Object.assign({},e,{meta:n})},e.prototype.addItemHandle=function(e,t){var r=t.keys,n=t.data,a=this.getOrigin(e),o=a.originData,s=a.originMeta,c=s.getKey(r).normalKey,u=i()(o).has(c)?i()(o).get(c):[];return i()(o).set(c,u.concat([n])),Object.assign({},e,{data:o})},e.prototype.removeItemHandle=function(e,t){var r=t.keys,n=t.index,a=this.getOrigin(e),o=a.originData,s=a.originMeta,c=s.getKey(r.concat([n.toString()])).normalKey;return o&&i()(o).has(c)&&i()(o).remove(c),s.removeMeta(r.concat([n.toString()])),Object.assign({},e,{data:o,meta:s})},e.prototype.switchItemHandle=function(e,t){var r=t.keys,n=t.curIndex,a=t.switchIndex,o=this.getOrigin(e),s=o.originData,c=o.originMeta,u=c.getKey(r).normalKey,p=i()(s).get(u);return m=[p[a],p[n]],p[n]=m[0],p[a]=m[1],i()(s).set(u,p),c.switchMeta(r,n,a),Object.assign({},e,{data:s,meta:c});var m},e}()},function(e,t,r){e.exports=r(3)},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(0),a=r(1),o=r.n(a),i=r(12),s=r(3),c=r(23),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){var e=this.props,t=e.children,r=e.mergeSchemaList,n=e.schemaKey,a=e.arrayItems,i=e.arrayIndex,u=e.globalOptions,p=e.RootComponent,m=e.schemaFormOptions,h=e.formDefaultData,d=e.getCurrentState,f=p;return f||(f=c.a),o.a.createElement(f,null,r.map(function(e,t){var c=!1;return"number"==typeof i&&(e.keys=e.keys.map(function(e){return"-"===e?i:e})),o.a.createElement(s.SchemaFormItem,{key:n+"-"+t.toString()+"}",getCurrentState:d,schemaKey:n,arrayIndex:i,arrayItems:a,formDefaultData:h,mergeSchemaList:r,mergeSchema:e,schemaFormOptions:m,globalOptions:u})}),t)},t}(o.a.Component),p=Object(i.a)(u)},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(2),a=r.n(n),o=r(6),i=Object(n.compose)(o.a.get("merge"))},function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r(0),a=r(1),o=r.n(a),i=r(4),s=r.n(i),c=r(7),u=r.n(c),p=r(2),m=r.n(p),h=r(8),d=function(e,t){var r=t.actions;for(var n in r)if(r.hasOwnProperty(n)){var a=r[n];a.assigned(e)||a.assignTo(e)}return{actions:r}},f=function(e,t){return function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.d(r,e),r.prototype.render=function(){var e=this.props,r=e.schema,a=e.uiSchema,s=e.parentKeys,c=e.schemaFormOptions,u=e.schemaKey,p=e.actions,m=e.formData,h,d={};return u||(u=(Date.now()+Math.random()).toString()),c=c||{avjOptions:{allErrors:!0,jsonPointers:!0,verbose:!0,useDefaults:!0,errorDataPath:"property"}},c.parentKeys=s||[],h=i.schemaMerge.merge(u,r,a,c),o.a.createElement(t,n.a({schemaFormOptions:c||{},schemaKey:u,mergeSchemaList:h},this.props))},r=n.c([Object(p.compose)(Object(c.connect)(h.a),Object(c.connect)(null,d),Object(p.onlyUpdateForKeys)(["schema","uiSchema","metaState"]))],r)}(o.a.Component)}},function(e,t){e.exports=o},function(e,t,r){"use strict";r.d(t,"a",function(){return d});var n=r(0),a=r(1),o=r.n(a),i=r(2),s=r.n(i),c=r(16),u=r.n(c),p=r(17),m=r.n(p),h=Object(i.compose)(Object(i.lifecycle)({shouldComponentUpdate:function(e){var t=["isShow","isValid","errorText","isLoading"],r=m()(e.formItemData,this.props.formItemData),n=m()(u()(e.meta,t),u()(this.props.meta,t)),a=!r||!n;return console.groupCollapsed(e.mergeSchema.keys+"---temp中比较formItemData和Meta的值得变化;"+a),console.log("formItemData",r,e.formItemData,this.props.formItemData),console.log("meta",n,u()(e.meta,t),u()(this.props.meta,t)),console.log("shouldUpdate",r,n),console.groupEnd(),a}})),d=function(e,t){return function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.tempField="ui:temp",t}return n.d(r,e),r.prototype.render=function(){var e=this,r=this.props,a=r.mergeSchema,i=r.globalOptions,s=a.uiSchema,c=void 0===s?{options:{}}:s,u=a.keys,p=this.getTemplates(),m=c.options||{},h=0;return p.reduce(function(t,r){var a=r.key,s=r.Temp;return o.a.createElement(s,n.a({globalOptions:i,tempKey:a,uiSchemaOptions:m,key:u.join(".")+a+h++},e.props),t)},o.a.createElement(t,n.a({key:u.join("."),uiSchemaOptions:m},this.props)))},r.prototype.getTemplates=function(){var e=this.props,t=e.mergeSchema,r=e.globalOptions,n=e.currentTheme,a=t.uiSchema,o=void 0===a?{options:{}}:a,i=t.keys,s=t.type,c=r[s]||{},u=o[this.tempField]||c[this.tempField]||r[this.tempField]||"default",p=[];return"string"==typeof u?p.push({key:u,Temp:n.tempFactory.get(u)}):[].concat(u).reverse().forEach(function(e,t){n.tempFactory.has(e||"default")?p.push({key:e,Temp:n.tempFactory.get(e||"default")}):console.error("不存在"+e+"的temp！")}),p},r=n.c([h],r)}(o.a.Component)}},function(e,t,r){"use strict";t.__esModule=!0;var n=function e(t,r){for(var n={},a=0;a<r.length;a++){var o=r[a];t.hasOwnProperty(o)&&(n[o]=t[o])}return n};t.default=n},function(e,t){e.exports=i},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(0),a=r(1),o=r.n(a),i=function(e,t){return function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.d(r,e),r.prototype.shouldComponentUpdate=function(){return!1},r.prototype.render=function(){var e=this.props,r=e.mergeSchema,a=e.currentTheme,i=r.uiSchema,s=void 0===i?{theme:"",field:"",widget:""}:i,c,u;"object"==typeof r.type&&(r.type=r.type[0]);var p=s.field||r.type;if("object"==typeof p&&p.length&&(p=p[0]),!a.fieldFactory.has(s.field||r.type))return console.error("找不到field："+(s.field||r.type)),null;c=a.fieldFactory.get(s.field||r.type);var m=s.widget||r.type;return"object"==typeof m&&m.length&&(m=m[0]),a.widgetFactory.has(s.widget||r.type)?u=a.widgetFactory.get(s.widget||r.type):console.warn("找不到widget："+(s.widget||r.type),r),o.a.createElement(t,n.a({},this.props,{FieldComponent:c,WidgetComponent:u}))},r}(o.a.Component)}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(0),a=r(1),o=r.n(a),i=r(3),s=function(e,t){return function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.d(r,e),r.prototype.render=function(){var e=this.props.mergeSchema,r=e.uiSchema,a=void 0===r?{theme:"",field:""}:r,s;if(!i.nsFactory.has(a.theme||"default"))throw new Error("没有找到"+(a.theme||"default")+"的样式！");return s=i.nsFactory.get(a.theme||"default"),o.a.createElement(t,n.a({currentTheme:s},this.props))},r}(o.a.Component)}},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(0),a=r(1),o=r.n(a),i=r(7),s=r.n(i),c=r(2),u=r.n(c),p=r(8),m=function(e,t){var r=t.mergeSchema,n=t.actions,a=t.schemaFormOptions,o=t.schemaKey,i=t.formData,s=r.keys,c=a.ajv.compile(Object.assign({},r,{$async:!0,async:!0}));for(var u in n)if(n.hasOwnProperty(u)){var p=n[u];p.assigned(e)||p.assignTo(e)}return{updateItemData:function(e){n.updateItem||console.error("没有更新的action！"),n.updateItem({keys:s,data:e,meta:{}})},validate:function(e){n.updateItem||console.error("没有更新的action！");var t={dirty:!0,isValid:!1,isLoading:!1,errorText:""};n.updateItemMeta({keys:s,meta:{isLoading:!0,isValid:!1,errorText:!1}}),c(e).then(function(){t.isValid=!0,n.updateItemMeta({keys:s,meta:t})}).catch(function(e){t.errorText=e.errors?a.ajv.errorsText(e.errors):e.message,n.updateItemMeta({keys:s,meta:t})})}}},h=function(e,t){return function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.d(r,e),r.prototype.render=function(){var e=Object(c.compose)(Object(c.shouldUpdate)(function(e,t){return!1}),Object(i.connect)(p.a),Object(i.connect)(null,m))(t);return o.a.createElement(e,n.a({},this.props))},r}(o.a.Component)}},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(0),a=r(1),o=r.n(a),i=r(7),s=r.n(i),c=r(8),u=function(e,t){var r=t.mergeSchema,a=t.actions,o=t.schemaFormOptions,i=r.keys;return{toggleItem:function(e){a.toggleItem||console.error("没有找到的action！"),a.toggleItem({keys:i})},removeItem:function(e){a.removeItem||console.error("没有找到的action！"),a.removeItem({keys:i,index:e})},addItem:function(e){a.addItem||console.error("没有找到的action！"),a.addItem({keys:i,data:e})},switchItem:function(e){a.switchItem||console.error("没有找到的action！"),a.switchItem(n.a({keys:i},e))}}},p=function(e,t){return function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.d(r,e),r.prototype.render=function(){var e=this.props,r=e.mergeSchema,a=e.getHocOptions,i=r.type,s=a(),c=s.array,u=c||{},p=u.createItemButtons,m=void 0===p?function(e){return null}:p,h=u.createItemChildButtons,d=void 0===h?function(e){return null}:h,f=Object.assign({},this.props,{removeItem:this.removeItem.bind(this),addItem:this.addItem.bind(this),toggleItem:this.toggleItem.bind(this),switchItem:this.switchItem.bind(this)});return"array"===i?o.a.createElement(t,n.a({},f,{arrayItems:m(f),createItemChildButtons:d.bind(this,f)})):o.a.createElement(t,n.a({},this.props))},r.prototype.removeItem=function(e){var t=this.props,r=t.formItemData,n=void 0===r?[]:r,a=t.mergeSchema,o=t.removeItem,i=t.arrayIndex,s=a.uiSchema,c=a.type,u=a.keys;"array"===c&&void 0!==e&&o(e)},r.prototype.switchItem=function(e,t){var r=this.props,n=r.formItemData,a=void 0===n?[]:n,o=r.mergeSchema,i=r.switchItem,s=r.arrayIndex,c=o.uiSchema,u=o.type,p=o.keys;if("array"===u&&void 0!==e&&void 0!==t){if(t<0||a.length<t+1)return;i({curIndex:e,switchIndex:t})}},r.prototype.toggleItem=function(){(0,this.props.toggleItem)()},r.prototype.addItem=function(){var e=this.props,t=e.mergeSchema,r=e.validate,n=e.addItem;n("object"===t.items.type?{}:void 0)},r=n.c([Object(i.connect)(c.b,u)],r)}(o.a.Component)}},function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(0),a=r(1),o=r.n(a),i=r(2),s=r.n(i),c=function(e,t){return function(r){function a(){var e=null!==r&&r.apply(this,arguments)||this;return e.fieldKey="ui:item.hoc",e}return n.d(a,r),a.prototype.shouldComponentUpdate=function(){return!1},a.prototype.render=function(){var r=this.props,a=r.mergeSchema,s=r.globalOptions,c=a.uiSchema,u=void 0===c?{options:{}}:c,p=a.keys,m=a.type,h=s[m]||{},d=u[this.fieldKey]||h[this.fieldKey]||s[this.fieldKey]||["theme","field","validate","array","temp"],f=i.compose.apply(void 0,d.map(function(t){return e.get(t)}))(t);return o.a.createElement(f,n.a({getHocOptions:this.getHocOptions.bind(this)},this.props))},a.prototype.getHocOptions=function(){var e=this.props,t=e.mergeSchema,r=e.globalOptions,n=t.uiSchema,a=n.options||{};return Object.assign({},r.hoc||{},a.hoc||{})},a}(o.a.Component)}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(0),a=r(1),o=r.n(a),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){return o.a.createElement("div",null,this.props.children)},t}(o.a.Component)},function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(0),a=r(1),o=r.n(a),i=r(25),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){var e=this.props,t=e.FieldComponent,r=e.mergeSchema,a=r.uiSchema,i=void 0===a?{}:a;return t?o.a.createElement(t,n.a({},this.props)):(console.log(r,"没有找到匹配的field"),null)},t}(o.a.Component),c=Object(i.a)(s)},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(2),a=r.n(n),o=r(6),i=Object(n.compose)(Object(n.onlyUpdateForKeys)(["formItemData","meta","formData","mergeSchema"]),o.a.get("make"))},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(4),a=r.n(n),o=r(29),i=r(30);r.d(t,"b",function(){return o.a});var s={tempFactory:new n.BaseFactory,fieldFactory:new n.BaseFactory,widgetFactory:new n.BaseFactory};o.a.add("default",s);for(var c in i.a)if(i.a.hasOwnProperty(c)){var u=i.a[c];s.fieldFactory.add(c,u),s.fieldFactory.lock(c)}},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(0),a=r(4),o=r.n(a),i=function(e){function t(){return e.call(this)||this}return n.d(t,e),t}(a.BaseFactory),s=new i},function(e,t,r){"use strict";var n=r(31),a=r(32),o=r(33);t.a={string:n.a,boolean:n.a,number:n.a,integer:n.a,null:n.a,object:a.a,array:o.a}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(0),a=r(1),o=r.n(a),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){var e=this.props,t=e.mergeSchema,r=e.currentTheme,a=e.WidgetComponent;return o.a.createElement(a,n.a({key:t.keys.join(".")},this.props))},t}(o.a.Component)},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(0),a=r(1),o=r.n(a),i=r(3),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.render=function(){var e=this.props,t=e.mergeSchema,r=e.currentTheme,n=e.WidgetComponent,a=e.getCurrentState,s=e.globalOptions,c=e.schemaFormOptions,u=e.schemaKey,p=t.uiSchema;return o.a.createElement(i.SchemaForm,{schemaFormOptions:c,getCurrentState:a,schemaKey:u,schema:t,parentKeys:t.keys,RootComponent:p.root,uiSchema:p.items||["*"],globalOptions:s})},t}(o.a.Component)},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(0),a=r(1),o=r.n(a),i=r(3),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.renderItem=function(e,t){var r=this.props,n=r.mergeSchema,a=r.schemaKey,s=r.globalOptions,c=r.schemaFormOptions,u=r.getCurrentState,p=r.arrayItems,m=r.createItemChildButtons,h=n.uiSchema,d=n.keys;return o.a.createElement(i.SchemaForm,{key:d.join(".")+e,schema:n,getCurrentState:u,arrayIndex:e,arrayItems:m?m.bind(null,e,t):null,parentKeys:n.keys,RootComponent:null,schemaKey:a,uiSchema:h.items,schemaFormOptions:c,globalOptions:s})},t.prototype.render=function(){var e=this,t=this.props,r=t.mergeSchema,n=t.currentTheme,a=t.WidgetComponent,i=t.schemaKey,s=t.globalOptions,c=t.schemaFormOptions,u=t.formItemData,p=t.meta,m=void 0===p?{dirty:!1,isValid:!0,isShow:!0}:p,h=r.uiSchema,d=r.title,f;return f=u&&u.map(function(t,r){return e.renderItem(r,u.length)}),o.a.createElement("div",null,f||null)},t}(o.a.Component)},function(e,t,r){"use strict";var n=r(9),a=r(35),o=function(){function e(){}return e.prototype.createOne=function(e,t,r,o){var i=new a.a,s=r.validate(o,t).catch(console.error),c=new n.a({data:t,meta:i});return i.actions=c.actions,c},e.prototype.createMuti=function(e){void 0===e&&(e={});var t={};for(var r in e)if(e.hasOwnProperty(r)){var o=e[r],i=new a.a,s=new n.a({data:o,meta:i});i.actions=s.actions,o&&(t[r]=s.reducer)}return t},e}();t.a=new o},function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(0),a=r(36),o=r.n(a),i=r(5),s=r.n(i),c=function(){function e(){this.data={map:{},meta:{}},this.actions={},this.isInit=!1}return e.prototype.init=function(e,t){this.isInit||(this.isInit=!0,this.schemaFormOptions=e,this.curKey=t)},e.prototype.validateAll=function(e){return n.b(this,void 0,void 0,function(){var t=this,r,a,o;return n.e(this,function(n){switch(n.label){case 0:for(r in this.data.map)this.data.map.hasOwnProperty(r)&&(a=this.data.map[r],!1===a.isValid&&(a.isValid=!0));this.data.isLoading=!0,this.data.isValid=!1,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.schemaFormOptions.ajv.compile(this.schemaFormOptions.ajv.getSchema(this.curKey).schema)(e)];case 2:return n.sent(),this.data.isValid=!0,[3,4];case 3:return o=n.sent(),o.errors.forEach(function(e){var r=s.a.parse(e.dataPath),n=t.getMeta(r);t.setMeta(r,{dirty:!0,isLoading:!1,isValid:!1,errors:[],errorText:e.message})}),[3,4];case 4:return[2,this]}})})},e.prototype.getKey=function(e){var t=s.a.compile(e),r=s.a.escape(t);return{schemaKey:e.map(function(e){return"number"==typeof e?"-":e}).join("/"),normalKey:t,originEscapeKey:r,escapeKey:"/"+r}},e.prototype.setMeta=function(e,t,r){void 0===r&&(r=!0);var n=this.getKey(e),a=n.normalKey,o=n.escapeKey,i=n.originEscapeKey,s=n.schemaKey,c=this.getUuid({normalKey:a,escapeKey:o,originEscapeKey:i,schemaKey:s}),u=this.getCurMetaData(c);c!==o&&this.setCurMetaUuid(a,c),this.setCurMetaData(c,Object.assign({},u,t))},e.prototype.getUuid=function(e){var t=e.normalKey,r=e.escapeKey,n=e.originEscapeKey,a=e.schemaKey,i=s()(this.data.map),c=s()(this.data.meta),u,p;if(this.schemaFormOptions.map.has(a)){if(["array","object"].indexOf(this.schemaFormOptions.map.get(a).type)>=0)return r}return i.has(r)?r:(c.has(t)&&(u=c.get(t),p=u),"string"==typeof u&&u||(p="/"+s.a.escape("/"+o()())),p)},e.prototype.getMeta=function(e,t){void 0===t&&(t=!0);var r=this.getKey(e),n=r.normalKey,a=r.escapeKey,o=r.originEscapeKey,i=r.schemaKey,s=this.getUuid({normalKey:n,escapeKey:a,originEscapeKey:o,schemaKey:i});return this.getCurMetaData(s)},e.prototype.switchMeta=function(e,t,r){var n=this.getKey(e),a=n.normalKey,o=n.escapeKey,i=n.schemaKey,c=n.originEscapeKey;if(s()(this.data.meta).has(a)){var u=s()(this.data.meta).get(a);p=[u[r],u[t]],u[t]=p[0],u[r]=p[1],s()(this.data.meta).set(a,u);var p}},e.prototype.removeMeta=function(e){var t=s()(this.data.map),r=s()(this.data.meta),n=this.getKey(e),a=n.normalKey,o=n.escapeKey,i=n.originEscapeKey,c=n.schemaKey,u=this.getUuid({normalKey:a,escapeKey:o,originEscapeKey:i,schemaKey:c}),p=new RegExp("^"+i,"ig");for(var m in this.data.map)if(this.data.map.hasOwnProperty(m)){var h=this.getKey(s.a.parse(m));p.test(h.originEscapeKey)&&t.remove(h.escapeKey)}if(r.has(a)){var d=s.a.dict(r.get(a));r.remove(a);for(var m in d)if(d.hasOwnProperty(m)){var f=d[m];t.has(f)&&t.remove(f)}}t.has(u)&&t.remove(u)},e.prototype.getCurMetaData=function(e){return s()(this.data.map).has(""+e)?s()(this.data.map).get(""+e):{isShow:!0}},e.prototype.setCurMetaData=function(e,t){s()(this.data.map).set(""+e,t)},e.prototype.setCurMetaUuid=function(e,t){s()(this.data.meta).set(e,t)},e}()},function(e,t){e.exports=s}])});