!function t(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("json-pointer"),require("fx-schema-form-core"),require("react"),require("react-redux"),require("reselect"),require("recompose"),require("lodash.isequal"),require("uuid"),require("redux-act"),require("lodash.clonedeep")):"function"==typeof define&&define.amd?define("fx-schema-form-antd",["json-pointer","fx-schema-form-core","react","react-redux","reselect","recompose","lodash.isequal","uuid","redux-act","lodash.clonedeep"],n):"object"==typeof exports?exports["fx-schema-form-antd"]=n(require("json-pointer"),require("fx-schema-form-core"),require("react"),require("react-redux"),require("reselect"),require("recompose"),require("lodash.isequal"),require("uuid"),require("redux-act"),require("lodash.clonedeep")):e["fx-schema-form-antd"]=n(e["json-pointer"],e["fx-schema-form-core"],e.react,e["react-redux"],e.reselect,e.recompose,e["lodash.isequal"],e.uuid,e["redux-act"],e["lodash.clonedeep"])}(this,function(t,e,n,r,a,o,i,s,c,u){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function e(){return t.default}:function e(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=11)}([function(t,e,n){"use strict";function r(t,e){function n(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&(n[r[a]]=t[r[a]]);return n}function o(t,e,n,r){var a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r,i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function i(t,e){return function(n,r){e(n,r,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,s)}c((r=r.apply(t,e||[])).next())})}function u(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,i=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){a.label=n[1];break}if(6===n[0]&&a.label<s[1]){a.label=s[1],s=n;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(n);break}s[2]&&a.ops.pop(),a.trys.pop();continue}n=e.call(t,a)}catch(t){n=[6,t],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o,i,s,c;return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function m(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,o=[],i;try{for(;(void 0===e||e-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}function f(t){return this instanceof f?(this.v=t,this):new f(t)}function l(t,e,n){function r(t){u[t]&&(p[t]=function(e){return new Promise(function(n,r){m.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{o(u[t](e))}catch(t){c(m[0][3],t)}}function o(t){t.value instanceof f?Promise.resolve(t.value.v).then(i,s):c(m[0][2],t)}function i(t){a("next",t)}function s(t){a("throw",t)}function c(t,e){t(e),m.shift(),m.length&&a(m[0][0],m[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u=n.apply(t,e||[]),p,m=[];return p={},r("next"),r("throw"),r("return"),p[Symbol.asyncIterator]=function(){return this},p}function y(t){function e(e,a){t[e]&&(n[e]=function(n){return(r=!r)?{value:f(t[e](n)),done:"return"===e}:a?a(n):n})}var n,r;return n={},e("next"),e("throw",function(t){throw t}),e("return"),n[Symbol.iterator]=function(){return this},n}function g(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"==typeof m?m(t):t[Symbol.iterator]()}function v(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}e.d=r,n.d(e,"a",function(){return O}),e.c=o,e.b=c,e.e=u;var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},O=Object.assign||function t(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12);n.d(e,"SchemaForm",function(){return r.a});var a=n(29);n.d(e,"SchemaFormItem",function(){return a.a});var o=n(10);n.d(e,"FormReducer",function(){return o.a});var i=n(31);n.d(e,"defaultTheme",function(){return i.a}),n.d(e,"nsFactory",function(){return i.b});var s=n(9);n.d(e,"createForms",function(){return s.b}),n.d(e,"SchemaFormCreate",function(){return s.a});var c=n(8);n.d(e,"hocFactory",function(){return c.a});var u=n(5),p=n.n(u);p.a.set=function t(e,n,r){for(var a=Array.isArray(n)?n:p.a.parse(n),o=a[0],i=0,s=a.length;i<s-1;++i){var c=a[i];"-"===c&&Array.isArray(e)&&(c=e.length),o=a[i+1],c in e||(o.match(/^(\d+|-)$/)?e[c]=[]:e[c]={}),!e[c]&&o&&(e[c]=Number.isNaN(1*o)?{}:[]),e=e[c]}return"-"===o&&Array.isArray(e)&&(o=e.length),e[o]=r,this}},function(t,e){t.exports=r},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"d",function(){return l}),n.d(e,"c",function(){return y}),n.d(e,"a",function(){return g});var r=n(5),a=n.n(r),o=n(17),i=n.n(o),s=n(9),c=function(t,e){return e.getCurrentState?e.getCurrentState(t,e):t[e.schemaKey]},u=function(t,e){var n=c(t,e).data;return void 0===n?{}:n},p=function(t,e){var n=e.schemaKey,a=e.mergeSchema,o=a.keys,i=void 0===o?[]:o,s=c(t,e).data,u=void 0===s?{}:s;return r.has(u,r.compile(i))?r.get(u,r.compile(i)):void 0},m=function(t,e){var n=e.schemaKey,r=c(t,e).meta;return{isLoading:r.isLoading,isValid:r.isValid}},h=function(t,e){var n=e.schemaKey,r=e.mergeSchema,a=r.keys,o=void 0===a?[]:a,i=s.a.metas[n],u=c(t,e).meta;return i.getMeta(o,"array"!==r.type)},d=function(t,e){var n=e.schemaKey,r=s.a.metas[n];return e.schemaFormOptions&&e.schemaFormOptions.ajv&&r.init(e.schemaFormOptions,e.schemaKey),r.actions},f=Object(o.createSelector)([u],function(t){return{formData:t}}),l=Object(o.createSelector)([h],function(t){return{meta:t}}),y=Object(o.createSelector)([p],function(t){return{formItemData:t}}),g=Object(o.createSelector)([d],function(t){return{actions:t}})},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(6),a=n.n(r),o=n(14),i=n(15),s=n(22),c=n(23),u=n(24),p=n(25),m=n(26),h=n(27),d=new r.BaseFactory,f={merge:o.a.bind(o.a,d),temp:i.a.bind(i.a,d),field:s.a.bind(s.a,d),theme:c.a.bind(c.a,d),validate:u.a.bind(u.a,d),array:p.a.bind(p.a,d),make:m.a.bind(m.a,d),condition:h.a.bind(h.a,d)};for(var l in f)if(f.hasOwnProperty(l)){var y=f[l];d.add(l,y),d.lock(l)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(10),a=n(20),o=function(){function t(){}return t.prototype.createOne=function(e,n,o,i,s,c){var u=new a.a,p=o.validate(i,n).catch(function(){return 1}),m=new r.a(c?c({},{data:n,meta:u.data}):{data:n,meta:u.data},u,s,c);return u.actions=m.actions,t.metas[e]=u,m},t.metas={},t}();e.b=new o},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(18),a=n.n(r),o=n(5),i=n.n(o),s=n(19),c=n.n(s),u=function(){function t(t,e,n,a){this.initialState=t,this.meta=e,this.getOriginState=n,this.updateState=a,this.updateItem=Object(r.createAction)("更新表单值"),this.toggleItem=Object(r.createAction)("显示/隐藏元素"),this.removeItem=Object(r.createAction)("删除元素"),this.addItem=Object(r.createAction)("添加元素"),this.switchItem=Object(r.createAction)("元素移位"),this.updateItemMeta=Object(r.createAction)("更新元素的meta信息"),this.updateMetaState=Object(r.createAction)("更改meta的状态"),this.updateData=Object(r.createAction)("更改data的值")}return Object.defineProperty(t.prototype,"actions",{get:function(){return{updateItem:this.updateItem,toggleItem:this.toggleItem,removeItem:this.removeItem,addItem:this.addItem,switchItem:this.switchItem,updateMetaState:this.updateMetaState,updateItemMeta:this.updateItemMeta,updateData:this.updateData}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reducer",{get:function(){return Object(r.createReducer)((t={},t[this.updateItem]=this.updateItemHandle.bind(this),t[this.toggleItem]=this.toggleItemHandle.bind(this),t[this.addItem]=this.addItemHandle.bind(this),t[this.removeItem]=this.removeItemHandle.bind(this),t[this.switchItem]=this.switchItemHandle.bind(this),t[this.updateMetaState]=this.updateMetaStateHandle.bind(this),t[this.updateItemMeta]=this.updateMetaHandle.bind(this),t[this.updateData]=this.updateDataHandle.bind(this),t),this.initialState);var t},enumerable:!0,configurable:!0}),t.prototype.updateDataHandle=function(t,e){return this.updateState?this.updateState(t,{data:e,meta:{map:{},meta:{}}}):Object.assign({},t,{data:e,meta:{map:{},meta:{}}})},t.prototype.getOrigin=function(t){return this.getOriginState?this.getOriginState(t):{originData:c()(t.data),originMeta:c()(t.meta)}},t.prototype.updateMetaStateHandle=function(t,e){var n=e.isLoading,r=e.isValid,a=e.meta,o=this.getOrigin(t).originMeta;return a&&(o=a),void 0!==n&&(o.isLoading=n),void 0!==r&&(o.isValid=r),this.updateState?this.updateState(t,{meta:o}):Object.assign({},t,{meta:o})},t.prototype.updateItemHandle=function(t,e){var n=e.keys,r=e.data,a=e.meta,o=this.getOrigin(t).originData,s=this.meta.getKey(n).normalKey;return i()(o).set(s,r),this.meta.setMeta(n,a),this.updateState?this.updateState(t,{data:o,meta:this.meta.data}):Object.assign({},t,{data:o,meta:this.meta.data})},t.prototype.updateMetaHandle=function(t,e){var n=e.keys,r=e.meta,a=this.getOrigin(t).originData,o=this.meta.getKey(n).normalKey,i=this.meta.getMeta(n,!1)||{};return this.meta.setMeta(n,r),this.updateState?this.updateState(t,{meta:this.meta.data}):Object.assign({},t,{meta:this.meta.data})},t.prototype.toggleItemHandle=function(t,e){var n=e.keys,r=this.meta.getKey(n).normalKey,a=this.meta.getMeta(n,!1)||{};return this.meta.setMeta(n,Object.assign({},a,{isShow:void 0!==a.isShow&&!a.isShow}),!1),this.updateState?this.updateState(t,{meta:this.meta.data}):Object.assign({},t,{meta:this.meta.data})},t.prototype.addItemHandle=function(t,e){var n=e.keys,r=e.data,a=this.getOrigin(t).originData,o=this.meta.getKey(n).normalKey,s=i()(a).has(o)?i()(a).get(o):[];return i()(a).set(o,s.concat([r])),this.updateState?this.updateState(t,{data:a}):Object.assign({},t,{data:a})},t.prototype.removeItemHandle=function(t,e){var n=e.keys,r=e.index,a=this.getOrigin(t).originData,o=this.meta.getKey(n.concat([r.toString()])).normalKey;return a&&i()(a).has(o)&&i()(a).remove(o),this.meta.removeMeta(n.concat([r.toString()])),this.updateState?this.updateState(t,{data:a,meta:this.meta.data}):Object.assign({},t,{data:a,meta:this.meta.data})},t.prototype.switchItemHandle=function(t,e){var n=e.keys,r=e.curIndex,a=e.switchIndex,o=this.getOrigin(t).originData,s=this.meta.getKey(n).normalKey,c=i()(o).get(s);return u=[c[a],c[r]],c[r]=u[0],c[a]=u[1],i()(o).set(s,c),this.meta.switchMeta(n,r,a),this.updateState?this.updateState(t,{data:o,meta:this.meta.data}):Object.assign({},t,{data:o,meta:this.meta.data});var u},t}()},function(t,e,n){t.exports=n(3)},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(0),a=n(1),o=n.n(a),i=n(13),s=n(3),c=n(28),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e.prototype.render=function(){var t=this.props,e=t.children,n=t.mergeSchemaList,r=t.schemaKey,a=t.arrayItems,i=t.arrayIndex,u=t.globalOptions,p=t.RootComponent,m=t.schemaFormOptions,h=t.formDefaultData,d=t.getCurrentState,f=p;return f||(f=c.a),console.log("form render----------------"),o.a.createElement(f,null,n.map(function(t,e){var c=!1;return"number"==typeof i&&(t.keys=t.keys.map(function(t){return"-"===t?i:t})),o.a.createElement(s.SchemaFormItem,{key:r+"-"+e.toString()+"}",getCurrentState:d,schemaKey:r,arrayIndex:i,arrayItems:a,formDefaultData:h,mergeSchemaList:n,mergeSchema:t,schemaFormOptions:m,globalOptions:u})}),e)},e}(o.a.PureComponent),p=Object(i.a)(u)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(2),a=n.n(r),o=n(8),i=Object(r.compose)(o.a.get("merge"))},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(0),a=n(1),o=n.n(a),i=n(6),s=n.n(i),c=n(4),u=n.n(c),p=n(2),m=n.n(p),h=function(t,e){var n=e.actions;for(var r in n)if(n.hasOwnProperty(r)){var a=n[r];a.assigned(t)||a.assignTo(t)}return{actions:n}},d=function(t,e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r.d(n,t),n.prototype.render=function(){var t=this.props,n=t.schema,a=t.uiSchema,s=t.parentKeys,c=t.schemaFormOptions,u=t.schemaKey,p=t.formData,m,h={};return console.log("merge render -----"),u||(u=(Date.now()+Math.random()).toString()),c=c||{avjOptions:{allErrors:!0,jsonPointers:!0,verbose:!0,useDefaults:!0,errorDataPath:"property"}},c.parentKeys=s||[],m=i.schemaMerge.merge(u,n,a,c),o.a.createElement(e,r.a({schemaFormOptions:c||{},schemaKey:u,mergeSchemaList:m},this.props))},n=r.c([Object(p.compose)(Object(p.onlyUpdateForKeys)(["schema"]),Object(c.connect)(null,h))],n)}(o.a.PureComponent)}},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(0),a=n(1),o=n.n(a),i=n(2),s=n.n(i),c=n(16),u=n.n(c),p=n(4),m=n.n(p),h=n(7),d=Object(i.compose)(Object(p.connect)(h.d),Object(i.shouldUpdate)(function(t,e){return!u()(t.meta,e.meta)}),Object(i.onlyUpdateForKeys)(["meta"])),f=function(t,e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.tempField="ui:temp",e}return r.d(n,t),n.prototype.render=function(){var t=this,n=this.props,a=n.mergeSchema,s=n.globalOptions,c=a.uiSchema,u=void 0===c?{options:{}}:c,m=a.keys,d=this.getTemplates(),f=u.options||{},l=Object(i.compose)(Object(p.connect)(h.c))(e),y=0;return d.reduce(function(e,n){var a=n.key,i=n.Temp;return o.a.createElement(i,r.a({globalOptions:s,tempKey:a,uiSchemaOptions:f,key:m.join(".")+a+y++},t.props),e)},o.a.createElement(l,r.a({key:m.join("."),uiSchemaOptions:f},this.props)))},n.prototype.getTemplates=function(){var t=this.props,e=t.mergeSchema,n=t.globalOptions,r=t.currentTheme,a=e.uiSchema,o=void 0===a?{options:{}}:a,i=e.keys,s=e.type,c=n[s]||{},u=o[this.tempField]||c[this.tempField]||n[this.tempField]||"default",p=[];return"string"==typeof u?p.push({key:u,Temp:r.tempFactory.get(u)}):[].concat(u).reverse().forEach(function(t,e){r.tempFactory.has(t||"default")?p.push({key:t,Temp:r.tempFactory.get(t||"default")}):console.error("不存在"+t+"的temp！")}),p},n=r.c([d],n)}(o.a.PureComponent)}},function(t,e){t.exports=i},function(t,e){t.exports=a},function(t,e){t.exports=c},function(t,e){t.exports=u},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(0),a=n(21),o=n.n(a),i=n(5),s=n.n(i),c=function(){function t(){this.data={map:{},meta:{}},this.actions={},this.isInit=!1}return t.prototype.init=function(t,e){this.isInit||(this.isInit=!0,this.schemaFormOptions=t,this.curKey=e)},t.prototype.validateAll=function(t){return r.b(this,void 0,void 0,function(){var e=this,n,a,o,i,s;return r.e(this,function(r){switch(r.label){case 0:for(n in this.data.map)this.data.map.hasOwnProperty(n)&&(a=this.data.map[n],a.isValid=!0,a.dirty=!0);this.data.isLoading=!0,this.data.isValid=!1,r.label=1;case 1:return r.trys.push([1,3,,4]),o=this.schemaFormOptions.ajv.getSchema(this.curKey).schema,i=this.schemaFormOptions.ajv.compile(o),[4,i(t).then(function(){e.data.isValid=!0}).catch(function(t){e.data.isValid=!1,t.errors&&t.errors.length&&e.setErrors(t.errors)})];case 2:return r.sent(),[3,4];case 3:return s=r.sent(),console.log("dfkljalkdsjfkla",s),[3,4];case 4:return[2,this.data]}})})},t.prototype.setErrors=function(t){var e=this;this.data.isValid=!1,t.forEach(function(t){var n=s.a.parse(t.dataPath),r=e.getMeta(n);e.setMeta(n,{dirty:!0,isLoading:!1,isValid:!1,errors:[],errorText:e.schemaFormOptions.ajv.errorsText([t],{separator:",",dataVar:""})})})},t.prototype.getKey=function(t){var e=s.a.compile(t),n=s.a.escape(e);return{schemaKey:t.map(function(t){return Number.isNaN(Number(t))?t:"-"}).join("/"),normalKey:e,originEscapeKey:n,escapeKey:"/"+n}},t.prototype.setMeta=function(t,e,n){void 0===n&&(n=!0);var r=this.getKey(t),a=r.normalKey,o=r.escapeKey,i=r.originEscapeKey,s=r.schemaKey,c=this.getUuid({normalKey:a,escapeKey:o,originEscapeKey:i,schemaKey:s}),u=this.getCurMetaData(c);c!==o&&this.setCurMetaUuid(a,c),this.setCurMetaData(c,Object.assign({},u,e))},t.prototype.getUuid=function(t){var e=t.normalKey,n=t.escapeKey,r=t.originEscapeKey,a=t.schemaKey,i=s()(this.data.map),c=s()(this.data.meta),u,p;if(this.schemaFormOptions.map.has(a)){if(["array","object"].indexOf(this.schemaFormOptions.map.get(a).type)>=0)return n}return i.has(n)?n:(c.has(e)&&(u=c.get(e),p=u),"string"==typeof u&&u||(p="/"+s.a.escape("/"+o()())),p)},t.prototype.getMeta=function(t,e){void 0===e&&(e=!0);var n=this.getKey(t),r=n.normalKey,a=n.escapeKey,o=n.originEscapeKey,i=n.schemaKey,s=this.getUuid({normalKey:r,escapeKey:a,originEscapeKey:o,schemaKey:i});return this.getCurMetaData(s)},t.prototype.switchMeta=function(t,e,n){var r=this.getKey(t),a=r.normalKey,o=r.escapeKey,i=r.schemaKey,c=r.originEscapeKey;if(s()(this.data.meta).has(a)){var u=s()(this.data.meta).get(a);p=[u[n],u[e]],u[e]=p[0],u[n]=p[1],s()(this.data.meta).set(a,u);var p}},t.prototype.removeMeta=function(t){var e=s()(this.data.map),n=s()(this.data.meta),r=this.getKey(t),a=r.normalKey,o=r.escapeKey,i=r.originEscapeKey,c=r.schemaKey,u=this.getUuid({normalKey:a,escapeKey:o,originEscapeKey:i,schemaKey:c}),p=new RegExp("^"+i,"ig");for(var m in this.data.map)if(this.data.map.hasOwnProperty(m)){var h=this.getKey(s.a.parse(m));p.test(h.originEscapeKey)&&e.remove(h.escapeKey)}if(n.has(a)&&n.get(a)){var d=s.a.dict(n.get(a));n.remove(a);for(var m in d)if(d.hasOwnProperty(m)){var f=d[m];e.has(f)&&e.remove(f)}}e.has(u)&&e.remove(u)},t.prototype.getCurMetaData=function(t){return s()(this.data.map).has(""+t)?s()(this.data.map).get(""+t):{isShow:!0}},t.prototype.setCurMetaData=function(t,e){s()(this.data.map).set(""+t,e)},t.prototype.setCurMetaUuid=function(t,e){s()(this.data.meta).set(t,e)},t}()},function(t,e){t.exports=s},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),a=n(1),o=n.n(a),i=function(t,e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r.d(n,t),n.prototype.render=function(){var t=this.props,n=t.mergeSchema,a=t.currentTheme,i=n.uiSchema,s=void 0===i?{theme:"",field:"",widget:""}:i,c,u;"object"==typeof n.type&&(n.type=n.type[0]);var p=s.field||n.type;if("object"==typeof p&&p.length&&(p=p[0]),!a.fieldFactory.has(s.field||n.type))return console.error("找不到field："+(s.field||n.type)),null;c=a.fieldFactory.get(s.field||n.type);var m=s.widget||n.type;return"object"==typeof m&&m.length&&(m=m[0]),a.widgetFactory.has(s.widget||n.type)&&(u=a.widgetFactory.get(s.widget||n.type)),o.a.createElement(e,r.a({},this.props,{FieldComponent:c,WidgetComponent:u}))},n}(o.a.PureComponent)}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),a=n(1),o=n.n(a),i=n(3),s=function(t,e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r.d(n,t),n.prototype.render=function(){var t=this.props.mergeSchema,n=t.uiSchema,a=void 0===n?{theme:"",field:""}:n,s;if(!i.nsFactory.has(a.theme||"default"))throw new Error("没有找到"+(a.theme||"default")+"的样式！");return s=i.nsFactory.get(a.theme||"default"),o.a.createElement(e,r.a({currentTheme:s},this.props))},n}(o.a.PureComponent)}},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(0),a=n(1),o=n.n(a),i=n(4),s=n.n(i),c=n(2),u=n.n(c),p=n(7),m=function(t,e){var n=e.mergeSchema,r=e.actions,a=e.schemaFormOptions,o=e.schemaKey,i=e.formData,s=n.keys,c=a.ajv.compile(Object.assign({},n,{$async:!0,id:null}));for(var u in r)if(r.hasOwnProperty(u)){var p=r[u];p.assigned(t)||p.assignTo(t)}return{updateItemData:function(t){r.updateItem({keys:s,data:t,meta:{}})},validate:function(t){var e={dirty:!0,isValid:!1,isLoading:!1,errorText:""},n=setTimeout(function(){r.updateItemMeta({keys:s,meta:{isLoading:!0,isValid:!1,errorText:!1}})},50);c(t).then(function(){clearTimeout(n),e.isValid=!0,r.updateItemMeta({keys:s,meta:e})}).catch(function(t){clearTimeout(n),e.errorText=t.errors?a.ajv.errorsText(t.errors,{dataVar:"/"+s.join("/")}):t.message,r.updateItemMeta({keys:s,meta:e})})}}},h=function(t,e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r.d(n,t),n.prototype.render=function(){return o.a.createElement(e,r.a({},this.props))},n=r.c([Object(c.compose)(Object(i.connect)(p.a),Object(i.connect)(null,m),c.pure)],n)}(o.a.PureComponent)}},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(0),a=n(1),o=n.n(a),i=n(2),s=n.n(i),c=n(4),u=n.n(c),p=n(7),m=function(t,e){var n=e.mergeSchema,a=e.actions,o=e.schemaFormOptions,i=n.keys;return{toggleItem:function(t){a.toggleItem({keys:i})},removeItem:function(t){a.removeItem({keys:i,index:t})},addItem:function(t){a.addItem({keys:i,data:t})},switchItem:function(t){a.switchItem(r.a({keys:i},t))}}},h=function(t,e){var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r.d(n,t),n.prototype.render=function(){var t=this.props,n=t.mergeSchema,a=t.getHocOptions,i=n.type,s=a(),c=s.array,u=c||{},p=u.createItemButtons,m=void 0===p?function(t){return null}:p,h=u.createItemChildButtons,d=void 0===h?function(t){return null}:h,f=Object.assign({},this.props,{removeItem:this.removeItem.bind(this),addItem:this.addItem.bind(this),toggleItem:this.toggleItem.bind(this),switchItem:this.switchItem.bind(this)});return"array"===i?o.a.createElement(e,r.a({},f,{arrayItems:m(f),createItemChildButtons:d.bind(this,f)})):o.a.createElement(e,r.a({},this.props))},n.prototype.removeItem=function(t){var e=this.props,n=e.formItemData,r=void 0===n?[]:n,a=e.mergeSchema,o=e.removeItem,i=e.arrayIndex,s=a.uiSchema,c=a.type,u=a.keys;"array"===c&&void 0!==t&&o(t)},n.prototype.switchItem=function(t,e){var n=this.props,r=n.formItemData,a=void 0===r?[]:r,o=n.mergeSchema,i=n.switchItem,s=n.arrayIndex,c=o.uiSchema,u=o.type,p=o.keys;if("array"===u&&void 0!==t&&void 0!==e){if(e<0||a.length<e+1)return;i({curIndex:t,switchIndex:e})}},n.prototype.toggleItem=function(){(0,this.props.toggleItem)()},n.prototype.addItem=function(){var t=this.props,e=t.mergeSchema,n=t.validate,r=t.addItem;r("object"===e.items.type?{}:void 0)},n=r.c([Object(i.compose)(Object(c.connect)(p.c,m),Object(c.connect)(p.d))],n)}(o.a.PureComponent),a=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r.d(n,t),n.prototype.render=function(){return o.a.createElement(e,r.a({},this.props))},n=r.c([Object(c.connect)(p.c)],n)}(o.a.PureComponent);return function(t){return Object(i.branch)(t,Object(i.renderComponent)(a))}(function(t){var e=t.mergeSchema,n=t.getHocOptions;return"array"!==e.type})(n)}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(0),a=n(1),o=n.n(a),i=n(2),s=n.n(i),c=function(t,e){return function(n){function a(){var t=null!==n&&n.apply(this,arguments)||this;return t.fieldKey="ui:item.hoc",t}return r.d(a,n),a.prototype.shouldComponentUpdate=function(){return!1},a.prototype.render=function(){var n=this.props,a=n.mergeSchema,s=n.globalOptions,c=a.uiSchema,u=void 0===c?{options:{}}:c,p=a.keys,m=a.type,h=s[m]||{},d=u[this.fieldKey]||h[this.fieldKey]||s[this.fieldKey]||["theme","field","validate","array","temp"],f=i.compose.apply(void 0,d.map(function(e){return t.get(e)}))(e);return o.a.createElement(f,r.a({getHocOptions:this.getHocOptions.bind(this)},this.props))},a.prototype.getHocOptions=function(){var t=this.props,e=t.mergeSchema,n=t.globalOptions,r=e.uiSchema,a=r.options||{};return Object.assign({},n.hoc||{},a.hoc||{})},a}(o.a.PureComponent)}},function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n(0),a=n(1),o=n.n(a),i=n(5),s=n.n(i),c=n(4),u=n.n(c),p=n(7),m=function(t,e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.fieldKey="ui:condition",e}return r.d(n,t),n.prototype.render=function(){var t=this.props,n=t.getHocOptions,a=t.formData,i=t.formDefaultData,c=n(),u=c.condition,p=u.fields,m=!0,h=s()(Object.assign({},i,a));return p&&p.length&&(m=p.reduce(function(t,e){var n=e.key,r=e.val;if(h.has(n)){var a=h.get(n);return t&&a===r}return t&&!1},m)),m?o.a.createElement(e,r.a({},this.props)):null},n=r.c([Object(c.connect)(p.b)],n)}(o.a.PureComponent)}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),a=n(1),o=n.n(a),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e.prototype.render=function(){return o.a.createElement("div",null,this.props.children)},e}(o.a.Component)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(0),a=n(1),o=n.n(a),i=n(30),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e.prototype.render=function(){var t=this.props,e=t.FieldComponent,n=t.mergeSchema,a=n.uiSchema,i=void 0===a?{}:a;return e?o.a.createElement(e,r.a({},this.props)):(console.log(n,"没有找到匹配的field"),null)},e}(o.a.PureComponent),c=Object(i.a)(s)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(2),a=n.n(r),o=n(8),i=Object(r.compose)(Object(r.onlyUpdateForKeys)(["formItemData","meta"]),o.a.get("make"))},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(6),a=n.n(r),o=n(32),i=n(33);n.d(e,"b",function(){return o.a});var s={tempFactory:new r.BaseFactory,fieldFactory:new r.BaseFactory,widgetFactory:new r.BaseFactory};o.a.add("default",s);for(var c in i.a)if(i.a.hasOwnProperty(c)){var u=i.a[c];s.fieldFactory.add(c,u),s.fieldFactory.lock(c)}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),a=n(6),o=n.n(a),i=function(t){function e(){return t.call(this)||this}return r.d(e,t),e}(a.BaseFactory),s=new i},function(t,e,n){"use strict";var r=n(34),a=n(35),o=n(36);e.a={string:r.a,boolean:r.a,number:r.a,integer:r.a,null:r.a,object:a.a,array:o.a}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),a=n(1),o=n.n(a),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e.prototype.render=function(){var t=this.props,e=t.mergeSchema,n=t.currentTheme,a=t.WidgetComponent;return o.a.createElement(a,r.a({key:e.keys.join(".")},this.props))},e}(o.a.Component)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),a=n(1),o=n.n(a),i=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e.prototype.render=function(){var t=this.props,e=t.mergeSchema,n=t.currentTheme,r=t.WidgetComponent,a=t.getCurrentState,s=t.globalOptions,c=t.schemaFormOptions,u=t.schemaKey,p=e.uiSchema;return o.a.createElement(i.SchemaForm,{schemaFormOptions:c,getCurrentState:a,schemaKey:u,schema:e,parentKeys:e.keys,RootComponent:p.root,uiSchema:p.items||["*"],globalOptions:s})},e}(o.a.Component)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),a=n(1),o=n.n(a),i=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e.prototype.renderItem=function(t,e){var n=this.props,r=n.mergeSchema,a=n.schemaKey,s=n.globalOptions,c=n.schemaFormOptions,u=n.getCurrentState,p=n.arrayItems,m=n.createItemChildButtons,h=r.uiSchema,d=r.keys;return o.a.createElement(i.SchemaForm,{key:d.join(".")+t,schema:r,getCurrentState:u,arrayIndex:t,arrayItems:m?m.bind(null,t,e):null,parentKeys:r.keys,RootComponent:null,schemaKey:a,uiSchema:h.items,schemaFormOptions:c,globalOptions:s})},e.prototype.render=function(){var t=this,e=this.props,n=e.mergeSchema,r=e.currentTheme,a=e.WidgetComponent,i=e.schemaKey,s=e.globalOptions,c=e.schemaFormOptions,u=e.formItemData,p=e.meta,m=void 0===p?{dirty:!1,isValid:!0,isShow:!0}:p,h=n.uiSchema,d=n.title,f;return f=u&&u.map(function(e,n){return t.renderItem(n,u.length)}),o.a.createElement("div",null,f||null)},e}(o.a.Component)}])});